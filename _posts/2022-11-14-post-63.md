---
title: "[TOY] 가계부 만들기 3주차 : 기본 기능 구현 마무리"
excerpt: "예산을 설정하고, 소비 기록을 남기는 기본 기능 구현을 마무리(하는게 목표)"

categories:
  - TOY
tags:
  - toy-project
  - money-manager
  - vanila-javascript

date: 2022-11-14
last_modified_at: 2022-11-20
---

<br><br>

> #### 이번주 주간 목표
>
> 이번주는 소비내역을 저장하는 화면까지 계획했던 디자인 구현을 완료해보자.<br>
> 그리고나서 생각한 기능들을 덧붙여 쭉 진행할지,<br>
> 리액트로 다시 만들어서 제품을 디벨럽 시킬지 고민해야겠다.<br>
> 데이터가 로컬이 아니고 제대로 저장되려면 어찌해야하는지도 고민해야하고..

<br><br>

## 2022.11.14 - new Date()객체 활용

#### 필요한 날짜 정보를 변수로 정의

globals.js 파일에 날짜 정보 관련 변수들을 정의했다.

![img01](https://user-images.githubusercontent.com/81657811/201661776-5ae58add-f851-438a-b616-15641b5e5a42.png)

#### 시작일 option의 범위를 현재 월 정보에 맞게 호출

30일까지인 달, 31일까지 혹은 28일까지 있는 달 들이 있으니 시작일 option을 현재 월 정보에 맞추려고 하다가<br>
option의 성격 자체가 각 월보다는 일괄적인 정보로서 역할해야한다는 생각이 들어서 수정하지 않기로 했다.

option은 1일 ~ 30일로 고정하되,<br>
소비내역 화면으로 넘어왔을때 현재 월에 맞는 한달의 범위를 잡아주는 조건문이 필요하겠다.<br>
예를들어 시작일이 1일이라면, 2월 1일 ~ 2월 28일 로 표기하고 다음달엔 3월 1일 ~ 3월 31로 표기해줘야한다.

#### 지정한 시작일 기준 한달간의 범위 잡아 표시

시작일을 1일로 설정한 경우, 마지막 날짜가 해당 월의 마지막 일자가 될 수 있도록 조건문을 추가했다.

![img02](https://user-images.githubusercontent.com/81657811/201661787-2dfa1e73-9c1c-4de4-b283-b813db1f5fe4.png)

Date 객체에는 자동고침 기능이 있는데, 범위를 벗어나는 값을 설정하려고하면 자동으로 값이 수정된다.

`let date = new Date(2022, 0, 0)` 에서<br>
0일은 존재하지 않기 때문에, 전달의 마지막 날짜인 2021년 12월 31일을 출력한다.

`let date = new Date(2022, 0, 32)` 를 입력한다면<br>
32일도 존재하지 않으므로 다음달의 첫 날인 2022년 2월 1일을 출력한다.

[Date객체와 날짜]<br>
[JS 달력 만들기]

<br><br>

## 2022.11.16 - 데이터 유무에 따른 화면 전환

#### 로컬에 데이터가 있다면 spend 페이지 렌더링

데이터 저장, 화면에 출력, 화면전환 과정의 코드를 두개의 함수로 분리했다.

`setBudgetData` 입력한 데이터를 저장하고, generateSpendSummary를 실행한다.<br>
`generateSpendSummary` spend-summary에 저장한 데이터를 넣고 화면을 전환한다.

![img03](https://user-images.githubusercontent.com/81657811/202136015-3d5e7132-1323-44aa-bd66-eedba4f58e74.png)
_이제 저장된 데이터가 있으면 바로 spend 화면이 보여진다._

#### 소비내역 추가 모달 및 리스트 스타일링

소비내역을 추가할 수 있는 모달을 마크업하고 스타일링 했다.<br>
역시나.. 여기서도 추가 이슈들이 우르르 더 생겼다.

- 캘린더를 불러와야하고
- 처리된 줄 알았던 금액에 콤마 더해주는 함수가 전체적으로 적용될 수 있게 해야하고
- 아이콘 폰트 업데이트
- 각종 버튼 처리도 해주고
- 추가 데이터들도 저장해줘야한다.

<br><br>

## 2022.11.17 -

#### 소비내역 추가 모달 구현

#### 소비내역 데이터 로컬에 저장

#### 소비내역 리스트 동적 생성

#### 소비 총 금액 summary 영역에 반영

#### 예산 추가 모달 구현 (소비내역 추가 모달 모듈 활용)

#### 리스트 삭제 기능 구현

[date객체와 날짜]: https://ko.javascript.info/date
[js 달력 만들기]: https://gurtn.tistory.com/54
