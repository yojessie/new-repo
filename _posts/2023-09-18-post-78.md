---
title: "[myBudget] 프로젝트 환경설정"
excerpt: "React, Typescript, ESlint 개발환경 설정 및 컴포넌트 구조 설계"

categories:
  - Toyproject
tags:
  - React
  - Typescript
  - Toyproject

date: 2023-09-18
last_modified_at: 2023-09-18
---

<br>
<br>

> 바닐라 자바스크립트로 만들었던 가계부앱을 React + Typescript 로 다시 만들어보는 프로젝트를 시작했다.  
> 자바스크립트 만으로 프로젝트를 진행했을때는 모르는 것도 많았고, 일단 원하는 동작을 구현하는 것에만 집중했다.  
> 그 프로젝트를 다시보면 나름대로 컴포넌트별 js 파일을 분리했으나  
> 여러군데서 같이 쓰이는 데이터나 함수등을 처리하기 힘들어 global.js 파일을 만드는 식으로 해결했다.  
> 그러다보니 이파일 저파일을 많이 왔다갔다해야 동작 과정을 이해할 수 있는 코드들이 대부분이다.  
> 이번에는 이해할 수 있는 의미있는 좋은 코드를 만드는데 집중해보자.

## 230914 - 프로젝트 시작

### 개발환경 셋팅 - React, Typescript 프로젝트 생성

나는 깃헙에서 레포지토리를 생성하고 클론해온 상황이어서 해당 디렉토리의 터미널에서

```javascript
// 프로젝트 초기화
npx create-react-app ./ --template typescript
// styled-components 타입 추가
npm install styled-components @types/styled-components
```

를 실행시켜 React + Typescript 프로젝트를 초기화했다.  
그리고 `tsconfig.json` 파일에서 `target` 속성은 "ES6" 로 수정하고 `lib` 속성에 "ES6"를 추가했다.  
[타입스크립트 프로젝트 초기화 참고 글](https://cocobi.tistory.com/243)

<br>

### 개발환경 셋팅 - ESlint, Prettier 셋팅

ESlint와 Prettier extension은 설치되어있었고, 아래 커맨드로 추가 셋팅을 했다.

```javascript
// ESlint 설치
npm install eslint --save-dev
// ESlint 규칙 초기화
npx eslint --init
// ESlint 플러그인 설치 (React 규칙 포함하는 airbnb 버전)
npx install-peerdeps --dev eslint-config-airbnb
// prettier 설치
npm install prettier --save-dev --save-exact
// ESlint와 prettier 충돌 설정 비활성화
npm install eslint-plugin-prettier eslint-config-prettier --save-dev
```

root 경로의 `package.json` `.eslintrc` `.prettierrc` 파일은 아래와 같이 셋팅했다.

```javascript
// package.json 파일 script에 추가
"lint": "eslint \"./src/**/*.{ts,tsx,js,jsx}\"",
"lint:fix": "eslint --fix \"./src/**/*.{ts,tsx,js,jsx}\""
```

```javascript
// .eslintrc
module.exports = {
  env: {
    browser: true,
    es2021: true,
    node: true,
  },
  extends: [
    "plugin:react/recommended",
    "plugin:@typescript-eslint/recommended",
    "airbnb",
    "prettier",
  ],
  overrides: [
    {
      env: {
        node: true,
      },
      files: [".eslintrc.{js,cjs}"],
      parserOptions: {
        sourceType: "script",
      },
    },
  ],
  parserOptions: {
    ecmaVersion: "latest",
    sourceType: "module",
  },
  plugins: ["react", "@typescript-eslint", "prettier"],
  rules: { "no-console": "off" },
};
```

```json
// .prettierrc
{
  "singleQuote": true,
  "semi": true,
  "useTabs": false,
  "tabWidth": 2,
  "trailingComma": "all",
  "printWidth": 80,
  "bracketSpacing": true,
  "arrowParens": "always",
  "endOfLine": "auto"
}
```

<br>

### 이후 발생한 linter 에러 해결을 위해 추가한 작업

```javascript
// ERROR : JSX not allowed in files with extension '.tsx'
// eslintrc.js의 rules에 추가 (.tsx에서도 JSX 문법을 사용할 수 있게 함)
"rules":{
  "react/jsx-filename-extension":["warn",{"extensions":[".tsx"]}]
}

// ERROR : Unable to resolve path to module './App'
// 패키지 설치
npm install eslint-import-resolver-typescript --save-dev
// eslintrc.js에 setting 속성 추가
"settings":{
  "import/resolver":{
    "typescript":{}
  }
}

// ERROR : Missing file extension 'tsx' from './App'
// eslintrc.js의 rules에 추가
"rules":{
  "import/extensions":[
        "error",
        "ignorePackages",
        {
          "ts":"never",
          "tsx":"never"
        }
    ]
}
```

[eslint, prettier 설정 참고 글](https://velog.io/@he0_077/React-Typescript-eslint-prettier-%EC%84%A4%EC%A0%95)

여까지 진행하는데 꽤 시간이 많이 걸렸다.  
이렇게 프로젝트 환경 셋팅하는 일이 많지 않다보니 매번 너무나 해메게 된다..

<br>

### 프로젝트 구조 설계

이전 가계부 프로젝트를 진행할때는 UI를 그려놓고  
상태값을 공유하는 데이터가 어떤것인지 분류하는 정도로 설계 후 작업을 시작했다.  
자바스크립트 실력이 부족해서였을 수도, 좀 더 구체적인 설계를 하지 않아서일 수도 있지만  
지금의 내가 보는 그때의 코드는 아주 새롭다. 😂

> [리액트 설계 가이드](https://www.stevy.dev/react-design-guide/)  
> 처음에 명확한 설계 원칙을 세워 두지 않고 시작한다면  
> 점차 프로젝트가 커질수록 의존성이 짙고 목적이 사라진 코드가 덕지덕지 작성된다.
>
> **[ 프로젝트 설계 원칙]**
>
> - 단일책임 설계 : 하나의 컴포넌트는 한가지 역할만 수행하도록 설계한다.
> - 제어 위임 : 컴포넌트를 더 작게 만들어 제어를 메인 로직에 위임한다.  
>   다만 제어를 위임할수록 (컴포넌트를 작게 분리할 수록) 코드 이해 난이도는 높아지므로  
>   위임과 사용 용이성 사이의 정도를 조절할 필요가 있다.

프로젝트 설계에 대한 좋은 글을 찾았는데 내용을 완벽하게 이해하기는 어렵지만  
대략 디렉토리를 어떻게 구성해야할지, 컴포넌트를 얼마나 나눠야할지 판단하는데 도움이 될 것 같다.

<br>
