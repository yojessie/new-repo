---
title: "[TOY] 가계부 만들기 4주차 : 기본 기능 구현 마무리"
excerpt: "소비내역 데이터를 로컬에 저장하고 리스트에 반영시키는 등 마무리"

categories:
  - TOY
tags:
  - toy-project
  - money-manager
  - vanila-javascript

date: 2022-11-21
last_modified_at: 2022-11-27
---

<br><br>

> #### 이번주 주간 목표
>
> 데이터를 로컬에 저장하고 그것을 활용해 리스트를 동적 생성해보자.<br>
> 리스트 삭제, 예산 추가, setting 내용 수정 기능 등 디테일을 추가해볼 게획.

<br><br>

## 2022.11.21

#### 소비내역 데이터 로컬에 저장

add-modal에서 입력하는 값들을 묶어서 로컬에 저장하는 코드를 작성하기 위해<br>
이전에 강의 들으면서 만들었던 todo-list 부분도 다시 찾아서 들어보고<br>
localStorage에 관련한 문서들을 좀 더 찾아보며 공부했다.

> ###### 잊고 있었던 `JSON.stringify()` 와 `JSON.parse()` 복습하기
>
> localstrage에는 데이터가 string 타입으로만 저장될 수 있다.<br>
> 여러 정보가 담긴 배열 ['a', 'b', 'c'] 를 local에 저장했을때<br>
> 배열 내부 값만 a, b, c 와 같은 문자열로 저장되어버려서 다시 가져와 활용하기가 어려워진다.
>
> `JSON.stringify()`를 사용하면 데이터 그 자체를 문자열로 저장시킬 수 있다.<br> ['a', 'b', 'c'] 문자 상태 그대로.<br>
> 그런다음 `JSON.parse()`를 사용하면 저장된 값을 객체로 변환시켜 가져올 수 있다.<br>
> 지금 프로젝트에서는 한 개의 리스트에 id, date, expence, title, memo 등의 값을 담은 객체를 만들고<br>
> 그 값을 배열로 담아 로컬에 저장해야겠다.

단계가 많아 혼란스러울때는, 차근차근 순서를 적어보면 정리가 된다.

1. 저장버튼(submit) 누르면 페이지 새로고침 되지 않도록 preventDefault 해주기
2. input들의 value를 변수에 담고 저장한 값들을 담은 object 생성하기
3. 생성한 object를 spendList 배열에 push하기
4. spendList를 로컬에 문자열 그대로 저장하기 (stringify 사용)
5. 저장한 데이터를 가져와 리스트 동적으로 생성하기 (parse 사용 & innerHTML 보단 appendChild 로)
6. modal 닫기

복잡해보여서 어느세월에 할 수 있을까 했는데,
순서를 정리하고나니 차근차근 해결해나갈 수 있었다.

![img01](https://user-images.githubusercontent.com/81657811/203342746-46a8e8ce-65ff-4cde-ba19-6958577c0cbd.png)

![img02](https://user-images.githubusercontent.com/81657811/203343487-c3b1d13c-157d-4243-ad69-32b4400b2934.png)
_입력한 값들이 무사히 저장되었다._

#### innerHTML 대신 createElement

앞서 달력을 구현할때 innerHTML을 사용했다.<br>
그러다 문득 createElement 후 appendChild 했던 강의 프로젝트 코드를 보다가 뭐가 다른지 찾아봤다.<br>
[innerHTML vs createElement]

`innerHTML`은 실행할때마다 모든 요소를 다시 분석해서 재생성해야한다.<br>
그래서 `innerHTML`로 요소를 추가했을때, 사전에 작성한 이벤트는 자동 적용되지 않는다.<br>
이 문제는 전에 투표 기능을 만들면서 겪어봤던 문제같은데..<br>
지금보니 그때 innerHTML을 썼기때문에 이벤트가 걸리지 않았던 것인가...!

[2022.07.19 - 투표기능 만들기]<br>
이 프로젝트도 가계부 작업이 끝나면 디벨럽 해봐야겠다.

어쨌든 동적으로 요소를 생성할때는 `createElement`를 사용하는게 좋겠다.

<br><br>

## 2022.11.22

#### 소비내역 리스트 스타일링

저장한 데이터를 넣기전에 더미 태그들을 만들어 스타일을 먼저 잡았다.

근데 여기서 예상치 못하게 한참 걸렸다.<br>
이전까지는 정해놓은 width, height 값 안에 꽉 차는 UI만 들어가다가<br>
이번에는 리스트가 아래로 쭉 펼쳐지며 스크롤링 되어야하고,<br>
모바일과 데스크탑에서 봤을때 width, height의 기준을 다르게 해놨기 때문에 정리가 필요했다.<br>
후.. 간만에 매운맛 css 작업이었다.

![img03](https://user-images.githubusercontent.com/81657811/203344133-9ef5bbbf-7165-4436-93bb-e7c42b55d80d.png)
_왼쪽은 PC, 오른쪽은 모바일 기준 화면_

<br><br>

## 2022.11.23

#### 소비내역 리스트 동적 생성

#### 소비 총 금액 summary 영역에 반영

#### 예산 추가 모달 구현 (소비내역 추가 모달 모듈 활용)

#### 리스트 삭제 기능 구현

[innerhtml vs createelement]: https://velog.io/@arthur/innerHTML-vs-createElement
[2022.07.19 - 투표기능 만들기]: https://yojessie.github.io/til/post-32/
